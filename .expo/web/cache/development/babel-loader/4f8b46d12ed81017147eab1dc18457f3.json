{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from 'react';\nimport { StatusBar } from 'expo-status-bar';\nimport { styles } from \"./styleApp.js\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport AnimatedTyping from \"./AnimatedTyping.js\";\nimport { spotifyCredentials } from \"./secrets\";\nimport SpotifyWebAPI from 'spotify-web-api-js';\nimport * as WebBrowser from 'expo-web-browser';\nimport { makeRedirectUri, useAuthRequest } from 'expo-auth-session';\nimport { encode as btoa } from 'base-64';\nimport axios from 'axios';\nvar scopesArr = ['user-modify-playback-state'];\nvar scopes = scopesArr.join(' ');\nimport { NavigationContainer } from '@react-navigation/native';\nimport { createStackNavigator } from '@react-navigation/stack';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar discovery = {\n  authorizationEndpoint: \"https://accounts.spotify.com/authorize\",\n  tokenEndpoint: \"https://accounts.spotify.com/api/token\"\n};\n\nvar ScreenTwo = function ScreenTwo(props) {\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    token = _useState2[0],\n    setToken = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    name = _useState4[0],\n    setName = _useState4[1];\n  var _useAuthRequest = useAuthRequest({\n      responseType: 'token',\n      clientId: spotifyCredentials.clientId,\n      scopes: [\"user-read-currently-playing\", \"user-read-recently-played\", \"user-read-playback-state\", \"user-top-read\", \"user-modify-playback-state\", \"streaming\", \"user-read-email\", \"user-read-private\"],\n      usePKCE: false,\n      redirectUri: spotifyCredentials.redirectUri\n    }, discovery),\n    _useAuthRequest2 = _slicedToArray(_useAuthRequest, 3),\n    request = _useAuthRequest2[0],\n    response = _useAuthRequest2[1],\n    promptAsync = _useAuthRequest2[2];\n  console.log(request);\n  React.useEffect(function () {\n    if ((response == null ? void 0 : response.type) === \"success\") {\n      var access_token = response.params.access_token;\n      setToken(access_token);\n      console.log(response);\n    }\n  }, [response]);\n  React.useEffect(function () {\n    if (token) {\n      axios(\"https://api.spotify.com/v1/me\", {\n        method: \"GET\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + token\n        }\n      }).then(function (response) {\n        console.log(1);\n        console.log(response);\n        setName(response.data.display_name);\n        console.log(name);\n        setShouldShowName(true);\n      }).catch(function (error) {\n        console.log(\"error\", error.message);\n      });\n    }\n  });\n  React.useEffect(function () {\n    if (token) {\n      axios(\"https://api.spotify.com/v1/me/top/tracks?time_range=short_term\", {\n        method: \"GET\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + token\n        }\n      }).then(function (response) {\n        console.log(response);\n      }).catch(function (error) {\n        console.log(\"error\", error.message);\n      });\n    }\n  });\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    shouldShow = _useState6[0],\n    setShouldShow = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    shouldShowName = _useState8[0],\n    setShouldShowName = _useState8[1];\n  var _useState9 = useState(false),\n    _useState10 = _slicedToArray(_useState9, 2),\n    showButton = _useState10[0],\n    setShowButton = _useState10[1];\n  var next = function next() {\n    promptAsync();\n  };\n  return _jsxs(View, {\n    style: styles.screen2,\n    children: [_jsx(AnimatedTyping, {\n      text: [\"H \"],\n      onComplete: function onComplete() {\n        return setShowButton(true);\n      }\n    }), showButton ? _jsx(Pressable, {\n      style: styles.button2Style,\n      onPress: function onPress() {\n        promptAsync();\n      },\n      children: _jsx(Text, {\n        style: {\n          color: \"white\"\n        },\n        children: \"log in with spotify\"\n      })\n    }) : null, shouldShow ? _jsx(AnimatedTyping, {\n      text: [\"Hi i am an AI programmed, to judge your music taste bla bla bla ...\"]\n    }) : null, shouldShowName ? _jsx(Text, {\n      children: name\n    }) : null]\n  });\n};\n\nvar ScreenThree = function ScreenThree(props) {\n  var _useState11 = useState(false),\n    _useState12 = _slicedToArray(_useState11, 2),\n    shouldShowText = _useState12[0],\n    sethouldShowText = _useState12[1];\n\n  var back = function back() {\n    props.navigation.navigate('Music Judger');\n  };\n  return _jsxs(View, {\n    style: {\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    children: [_jsx(AnimatedTyping, {\n      text: [\"text text loading blablabla\"],\n      onComplete: function onComplete() {\n        return sethouldShowText(true);\n      }\n    }), shouldShowText ? _jsx(AnimatedTyping, {\n      text: [\"drugi text blabla\"]\n    }) : null, _jsx(Button, {\n      style: styles.buttomStyle,\n      title: \"back\",\n      color: \"#000000\",\n      onPress: back\n    })]\n  });\n};\nvar App = function App() {\n  var Stack = createStackNavigator();\n  return _jsx(NavigationContainer, {\n    children: _jsxs(Stack.Navigator, {\n      screenOptions: {\n        headerShown: false\n      },\n      children: [_jsx(Stack.Screen, {\n        name: \"Music Judger\",\n        component: ScreenOne\n      }), _jsx(Stack.Screen, {\n        name: \"ScreenTwo\",\n        component: ScreenTwo\n      }), _jsx(Stack.Screen, {\n        name: \"ScreenThree\",\n        component: ScreenThree\n      })]\n    })\n  });\n};\nWebBrowser.maybeCompleteAuthSession();\nexport default App;","map":{"version":3,"names":["React","useState","StatusBar","styles","AnimatedTyping","spotifyCredentials","SpotifyWebAPI","WebBrowser","makeRedirectUri","useAuthRequest","encode","btoa","axios","scopesArr","scopes","join","NavigationContainer","createStackNavigator","discovery","authorizationEndpoint","tokenEndpoint","ScreenTwo","props","token","setToken","name","setName","responseType","clientId","usePKCE","redirectUri","request","response","promptAsync","console","log","useEffect","type","access_token","params","method","headers","Accept","Authorization","then","data","display_name","setShouldShowName","catch","error","message","shouldShow","setShouldShow","shouldShowName","showButton","setShowButton","next","screen2","button2Style","color","ScreenThree","shouldShowText","sethouldShowText","back","navigation","navigate","flex","justifyContent","alignItems","buttomStyle","App","Stack","headerShown","ScreenOne","maybeCompleteAuthSession"],"sources":["D:/DOKUMENTI/r321/App.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { StatusBar } from 'expo-status-bar';\r\nimport { styles } from './styleApp.js';\r\nimport {View, Text, StyleSheet, TouchableOpacity, SafeAreaView, Button, Pressable } from 'react-native';\r\nimport AnimatedTyping from './AnimatedTyping.js';\r\nimport { spotifyCredentials } from './secrets';\r\nimport SpotifyWebAPI from 'spotify-web-api-js';\r\nimport * as WebBrowser from 'expo-web-browser';\r\n//import * as AuthSession from 'expo-auth-session';\r\nimport { makeRedirectUri, useAuthRequest } from 'expo-auth-session';\r\nimport { encode as btoa } from 'base-64';\r\nimport axios from 'axios';\r\n//the scope for our analytics\r\nconst scopesArr = ['user-modify-playback-state'];\r\nconst scopes = scopesArr.join(' ');\r\n//Navigation import\r\nimport {NavigationContainer} from '@react-navigation/native';\r\nimport {createStackNavigator} from '@react-navigation/stack';\r\n\r\nconst discovery = {\r\n  authorizationEndpoint: \r\n  \"https://accounts.spotify.com/authorize\",\r\n  tokenEndpoint: \r\n  \"https://accounts.spotify.com/api/token\",\r\n};\r\n\r\n//Screen One\r\n\r\n\r\n\r\n//Screen Two\r\nconst ScreenTwo = props => {\r\n    \r\nconst [token, setToken] = useState(\"\");\r\nconst [name, setName] = useState(\"\");\r\nconst [request, response, promptAsync] = \r\n  useAuthRequest(\r\n    {\r\n      responseType: 'token',\r\n      clientId: spotifyCredentials.clientId,\r\n      scopes: [\r\n        \"user-read-currently-playing\",\r\n        \"user-read-recently-played\",\r\n        \"user-read-playback-state\",\r\n        \"user-top-read\",\r\n        \"user-modify-playback-state\",\r\n        \"streaming\",\r\n        \"user-read-email\",\r\n        \"user-read-private\",\r\n      ],\r\n      usePKCE: false,\r\n      redirectUri: spotifyCredentials.redirectUri,\r\n    },\r\n    discovery\r\n  )\r\n  console.log(request);\r\n\r\n  React.useEffect(() => {\r\n    if (response?.type === \"success\") {\r\n      const { access_token } = response.params;\r\n      setToken(access_token);\r\n      console.log(response);\r\n    }\r\n  }, [response]);\r\n\r\n  \r\n  React.useEffect(() => {\r\n    if (token) {\r\n      axios(\r\n        \"https://api.spotify.com/v1/me\", {\r\n        method: \"GET\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          console.log(1)\r\n          console.log(response);\r\n          setName(response.data.display_name);\r\n          console.log(name);\r\n          setShouldShowName(true); //\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"error\", error.message);\r\n        });\r\n    }\r\n  });\r\n  React.useEffect(() => {\r\n    if (token) {\r\n      axios(\r\n        \"https://api.spotify.com/v1/me/top/tracks?time_range=short_term\", {\r\n        method: \"GET\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          console.log(response);\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"error\", error.message);\r\n        });\r\n    }\r\n  });\r\n\r\n  const [shouldShow, setShouldShow] = useState(false);//false \r\n  const [shouldShowName, setShouldShowName] = useState(false);//false \r\n  const [showButton, setShowButton] = useState(false);\r\n\r\n\r\n  const next = () => {\r\n    //props.navigation.navigate('ScreenThree');\r\n    promptAsync();\r\n  };\r\n  return (\r\n    <View style={styles.screen2}>\r\n\r\n      <AnimatedTyping text={[\"H \"]} onComplete={() => setShowButton(true)}/>\r\n\r\n  \r\n      {showButton ? (\r\n          <Pressable  \r\n          style={styles.button2Style}\r\n          \r\n          onPress={()=> {promptAsync();}}><Text style={{color: \"white\"}}>log in with spotify</Text>\r\n      </Pressable >\r\n      ) : null}\r\n\r\n      {shouldShow ? (\r\n        <AnimatedTyping text={[\"Hi i am an AI programmed, to judge your music taste bla bla bla ...\"] } />\r\n      ) : null}\r\n\r\n      {shouldShowName ? (\r\n        <Text>\r\n          {name}\r\n          </Text>\r\n      ) : null}\r\n          \r\n    </View>\r\n  );\r\n};\r\n\r\n//Screen Three\r\nconst ScreenThree = props => {\r\n\r\n  const [shouldShowText, sethouldShowText] = useState(false);//false \r\n\r\n  const back = () => {\r\n    props.navigation.navigate('Music Judger');\r\n  };\r\n  return (\r\n    <View style={{flex: 1, justifyContent: 'center', alignItems: 'center'}}>\r\n\r\n      <AnimatedTyping text={[\"text text loading blablabla\"]} onComplete={() => sethouldShowText(true)}/>\r\n\r\n      {shouldShowText ? (\r\n        <AnimatedTyping text={[\"drugi text blabla\"] } />\r\n      ) : null}\r\n\r\n      <Button \r\n          style={styles.buttomStyle}\r\n          title=\"back\"\r\n          color={\"#000000\"}\r\n          onPress={back}>\r\n        </Button>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst App = () => {\r\n  const Stack = createStackNavigator();\r\n\r\n  return (\r\n    <NavigationContainer>\r\n      <Stack.Navigator\r\n        screenOptions={{\r\n        headerShown: false //nastavljanje headerja\r\n        }}\r\n      >\r\n        <Stack.Screen name=\"Music Judger\" component={ScreenOne} />\r\n        <Stack.Screen name=\"ScreenTwo\" component={ScreenTwo} />\r\n        <Stack.Screen name=\"ScreenThree\" component={ScreenThree} />\r\n      </Stack.Navigator>\r\n    </NavigationContainer>\r\n  );\r\n};\r\n\r\nWebBrowser.maybeCompleteAuthSession();\r\n\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}