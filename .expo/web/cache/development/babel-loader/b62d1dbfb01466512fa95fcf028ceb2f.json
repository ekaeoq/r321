{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport Constants from 'expo-constants';\nimport { Platform, UnavailabilityError } from 'expo-modules-core';\nimport invariant from 'invariant';\nimport qs from 'qs';\nimport { useEffect, useState } from 'react';\nimport URL from 'url-parse';\nimport NativeLinking from \"./ExpoLinking\";\nimport { hasCustomScheme, resolveScheme } from \"./Schemes\";\nfunction validateURL(url) {\n  invariant(typeof url === 'string', 'Invalid URL: should be a string. Was: ' + url);\n  invariant(url, 'Invalid URL: cannot be empty');\n}\nfunction getHostUri() {\n  var _Constants$manifest, _Constants$manifest2, _Constants$manifest2$, _Constants$manifest2$2;\n  if ((_Constants$manifest = Constants.manifest) != null && _Constants$manifest.hostUri) {\n    return Constants.manifest.hostUri;\n  } else if ((_Constants$manifest2 = Constants.manifest2) != null && (_Constants$manifest2$ = _Constants$manifest2.extra) != null && (_Constants$manifest2$2 = _Constants$manifest2$.expoClient) != null && _Constants$manifest2$2.hostUri) {\n    return Constants.manifest2.extra.expoClient.hostUri;\n  } else if (!hasCustomScheme()) {\n    return removeScheme(Constants.linkingUri).replace(/\\/--($|\\/.*$)/, '');\n  } else {\n    return null;\n  }\n}\nfunction isExpoHosted() {\n  var _Constants$manifest3, _Constants$manifest4, _Constants$manifest4$, _Constants$manifest4$2;\n  var hostUri = getHostUri();\n  return !!(hostUri && (/^(.*\\.)?(expo\\.io|exp\\.host|exp\\.direct|expo\\.test|expo\\.dev)(:.*)?(\\/.*)?$/.test(hostUri) || (_Constants$manifest3 = Constants.manifest) != null && _Constants$manifest3.developer || (_Constants$manifest4 = Constants.manifest2) != null && (_Constants$manifest4$ = _Constants$manifest4.extra) != null && (_Constants$manifest4$2 = _Constants$manifest4$.expoGo) != null && _Constants$manifest4$2.developer));\n}\nfunction removeScheme(url) {\n  return url.replace(/^[a-zA-Z0-9+.-]+:\\/\\//, '');\n}\nfunction removePort(url) {\n  return url.replace(/(?=([a-zA-Z0-9+.-]+:\\/\\/)?[^/]):\\d+/, '');\n}\nfunction removeLeadingSlash(url) {\n  return url.replace(/^\\//, '');\n}\nfunction removeTrailingSlashAndQueryString(url) {\n  return url.replace(/\\/?\\?.*$/, '');\n}\nfunction ensureTrailingSlash(input, shouldAppend) {\n  var hasSlash = input.endsWith('/');\n  if (hasSlash && !shouldAppend) {\n    return input.substring(0, input.length - 1);\n  } else if (!hasSlash && shouldAppend) {\n    return input + \"/\";\n  }\n  return input;\n}\nfunction ensureLeadingSlash(input, shouldAppend) {\n  var hasSlash = input.startsWith('/');\n  if (hasSlash && !shouldAppend) {\n    return input.substring(1);\n  } else if (!hasSlash && shouldAppend) {\n    return \"/\" + input;\n  }\n  return input;\n}\nexport function makeUrl() {\n  var path = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var queryParams = arguments.length > 1 ? arguments[1] : undefined;\n  var scheme = arguments.length > 2 ? arguments[2] : undefined;\n  return createURL(path, {\n    queryParams: queryParams,\n    scheme: scheme,\n    isTripleSlashed: true\n  });\n}\nexport function createURL(path) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n    scheme = _ref.scheme,\n    _ref$queryParams = _ref.queryParams,\n    queryParams = _ref$queryParams === void 0 ? {} : _ref$queryParams,\n    _ref$isTripleSlashed = _ref.isTripleSlashed,\n    isTripleSlashed = _ref$isTripleSlashed === void 0 ? false : _ref$isTripleSlashed;\n  if (Platform.OS === 'web') {\n    if (!Platform.isDOMAvailable) return '';\n    var origin = ensureTrailingSlash(window.location.origin, false);\n    var _queryString = qs.stringify(queryParams);\n    if (_queryString) {\n      _queryString = \"?\" + _queryString;\n    }\n    var outputPath = path;\n    if (outputPath) outputPath = ensureLeadingSlash(path, true);\n    return encodeURI(\"\" + origin + outputPath + _queryString);\n  }\n  var resolvedScheme = resolveScheme({\n    scheme: scheme\n  });\n  var hostUri = getHostUri() || '';\n  if (hasCustomScheme() && isExpoHosted()) {\n    hostUri = '';\n  }\n  if (path) {\n    if (isExpoHosted() && hostUri) {\n      path = \"/--/\" + removeLeadingSlash(path);\n    }\n    if (isTripleSlashed && !path.startsWith('/')) {\n      path = \"/\" + path;\n    }\n  } else {\n    path = '';\n  }\n  var queryString = '';\n  var queryStringMatchResult = hostUri.match(/(.*)\\?(.+)/);\n  if (queryStringMatchResult) {\n    hostUri = queryStringMatchResult[1];\n    queryString = queryStringMatchResult[2];\n    var paramsFromHostUri = {};\n    try {\n      var parsedParams = qs.parse(queryString);\n      if (typeof parsedParams === 'object') {\n        paramsFromHostUri = parsedParams;\n      }\n    } catch (_unused) {}\n    queryParams = _objectSpread(_objectSpread({}, queryParams), paramsFromHostUri);\n  }\n  queryString = qs.stringify(queryParams);\n  if (queryString) {\n    queryString = \"?\" + queryString;\n  }\n  hostUri = ensureLeadingSlash(hostUri, !isTripleSlashed);\n  return encodeURI(resolvedScheme + \":\" + (isTripleSlashed ? '/' : '') + \"/\" + hostUri + path + queryString);\n}\nexport function parse(url) {\n  validateURL(url);\n  var parsed = URL(url, true);\n  for (var param in parsed.query) {\n    parsed.query[param] = decodeURIComponent(parsed.query[param]);\n  }\n  var queryParams = parsed.query;\n  var hostUri = getHostUri() || '';\n  var hostUriStripped = removePort(removeTrailingSlashAndQueryString(hostUri));\n  var path = parsed.pathname || null;\n  var hostname = parsed.hostname || null;\n  var scheme = parsed.protocol || null;\n  if (scheme) {\n    scheme = scheme.substring(0, scheme.length - 1);\n  }\n  if (path) {\n    path = removeLeadingSlash(path);\n    var expoPrefix = null;\n    if (hostUriStripped) {\n      var parts = hostUriStripped.split('/');\n      expoPrefix = parts.slice(1).concat(['--/']).join('/');\n    }\n    if (isExpoHosted() && !hasCustomScheme() && expoPrefix && path.startsWith(expoPrefix)) {\n      path = path.substring(expoPrefix.length);\n      hostname = null;\n    } else if (path.indexOf('+') > -1) {\n      path = path.substring(path.indexOf('+') + 1);\n    }\n  }\n  return {\n    hostname: hostname,\n    path: path,\n    queryParams: queryParams,\n    scheme: scheme\n  };\n}\nexport function addEventListener(type, handler) {\n  return NativeLinking.addEventListener(type, handler);\n}\nexport function removeEventListener(type, handler) {\n  NativeLinking.removeEventListener(type, handler);\n}\nexport function parseInitialURLAsync() {\n  return _parseInitialURLAsync.apply(this, arguments);\n}\nfunction _parseInitialURLAsync() {\n  _parseInitialURLAsync = _asyncToGenerator(function* () {\n    var initialUrl = yield NativeLinking.getInitialURL();\n    if (!initialUrl) {\n      return {\n        scheme: null,\n        hostname: null,\n        path: null,\n        queryParams: null\n      };\n    }\n    return parse(initialUrl);\n  });\n  return _parseInitialURLAsync.apply(this, arguments);\n}\nexport function sendIntent(_x, _x2) {\n  return _sendIntent.apply(this, arguments);\n}\nfunction _sendIntent() {\n  _sendIntent = _asyncToGenerator(function* (action, extras) {\n    if (Platform.OS === 'android') {\n      return yield NativeLinking.sendIntent(action, extras);\n    }\n    throw new UnavailabilityError('Linking', 'sendIntent');\n  });\n  return _sendIntent.apply(this, arguments);\n}\nexport function openSettings() {\n  return _openSettings.apply(this, arguments);\n}\nfunction _openSettings() {\n  _openSettings = _asyncToGenerator(function* () {\n    if (Platform.OS === 'web') {\n      throw new UnavailabilityError('Linking', 'openSettings');\n    }\n    if (NativeLinking.openSettings) {\n      return yield NativeLinking.openSettings();\n    }\n    yield openURL('app-settings:');\n  });\n  return _openSettings.apply(this, arguments);\n}\nexport function getInitialURL() {\n  return _getInitialURL.apply(this, arguments);\n}\nfunction _getInitialURL() {\n  _getInitialURL = _asyncToGenerator(function* () {\n    var _yield$NativeLinking$;\n    return (_yield$NativeLinking$ = yield NativeLinking.getInitialURL()) != null ? _yield$NativeLinking$ : null;\n  });\n  return _getInitialURL.apply(this, arguments);\n}\nexport function openURL(_x3) {\n  return _openURL.apply(this, arguments);\n}\nfunction _openURL() {\n  _openURL = _asyncToGenerator(function* (url) {\n    validateURL(url);\n    return yield NativeLinking.openURL(url);\n  });\n  return _openURL.apply(this, arguments);\n}\nexport function canOpenURL(_x4) {\n  return _canOpenURL.apply(this, arguments);\n}\nfunction _canOpenURL() {\n  _canOpenURL = _asyncToGenerator(function* (url) {\n    validateURL(url);\n    return yield NativeLinking.canOpenURL(url);\n  });\n  return _canOpenURL.apply(this, arguments);\n}\nexport function useURL() {\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    url = _useState2[0],\n    setLink = _useState2[1];\n  function onChange(event) {\n    setLink(event.url);\n  }\n  useEffect(function () {\n    getInitialURL().then(function (url) {\n      return setLink(url);\n    });\n    var subscription = addEventListener('url', onChange);\n    return function () {\n      return subscription.remove();\n    };\n  }, []);\n  return url;\n}\nexport * from \"./Linking.types\";\nexport * from \"./Schemes\";","map":{"version":3,"mappings":"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","names":["Constants","Platform","UnavailabilityError","invariant","qs","useEffect","useState","URL","NativeLinking","hasCustomScheme","resolveScheme","validateURL","url","getHostUri","manifest","hostUri","manifest2","extra","expoClient","removeScheme","linkingUri","replace","isExpoHosted","test","developer","expoGo","removePort","removeLeadingSlash","removeTrailingSlashAndQueryString","ensureTrailingSlash","input","shouldAppend","hasSlash","endsWith","substring","length","ensureLeadingSlash","startsWith","makeUrl","path","queryParams","scheme","createURL","isTripleSlashed","OS","isDOMAvailable","origin","window","location","queryString","stringify","outputPath","encodeURI","resolvedScheme","queryStringMatchResult","match","paramsFromHostUri","parsedParams","parse","parsed","param","query","decodeURIComponent","hostUriStripped","pathname","hostname","protocol","expoPrefix","parts","split","slice","concat","join","indexOf","addEventListener","type","handler","removeEventListener","parseInitialURLAsync","initialUrl","getInitialURL","sendIntent","action","extras","openSettings","openURL","canOpenURL","useURL","setLink","onChange","event","then","subscription","remove"],"sourceRoot":"","sources":["../src/Linking.ts"],"sourcesContent":["import Constants from 'expo-constants';\nimport { Platform, UnavailabilityError } from 'expo-modules-core';\nimport invariant from 'invariant';\nimport qs from 'qs';\nimport { useEffect, useState } from 'react';\nimport { EmitterSubscription } from 'react-native';\nimport URL from 'url-parse';\n\nimport NativeLinking from './ExpoLinking';\nimport {\n  CreateURLOptions,\n  ParsedURL,\n  QueryParams,\n  SendIntentExtras,\n  URLListener,\n} from './Linking.types';\nimport { hasCustomScheme, resolveScheme } from './Schemes';\n\nfunction validateURL(url: string): void {\n  invariant(typeof url === 'string', 'Invalid URL: should be a string. Was: ' + url);\n  invariant(url, 'Invalid URL: cannot be empty');\n}\n\nfunction getHostUri(): string | null {\n  if (Constants.manifest?.hostUri) {\n    return Constants.manifest.hostUri;\n  } else if (Constants.manifest2?.extra?.expoClient?.hostUri) {\n    return Constants.manifest2.extra.expoClient.hostUri;\n  } else if (!hasCustomScheme()) {\n    // we're probably not using up-to-date xdl, so just fake it for now\n    // we have to remove the /--/ on the end since this will be inserted again later\n    return removeScheme(Constants.linkingUri).replace(/\\/--($|\\/.*$)/, '');\n  } else {\n    return null;\n  }\n}\n\nfunction isExpoHosted(): boolean {\n  const hostUri = getHostUri();\n  return !!(\n    hostUri &&\n    (/^(.*\\.)?(expo\\.io|exp\\.host|exp\\.direct|expo\\.test|expo\\.dev)(:.*)?(\\/.*)?$/.test(hostUri) ||\n      Constants.manifest?.developer ||\n      Constants.manifest2?.extra?.expoGo?.developer)\n  );\n}\n\nfunction removeScheme(url: string): string {\n  return url.replace(/^[a-zA-Z0-9+.-]+:\\/\\//, '');\n}\n\nfunction removePort(url: string): string {\n  return url.replace(/(?=([a-zA-Z0-9+.-]+:\\/\\/)?[^/]):\\d+/, '');\n}\n\nfunction removeLeadingSlash(url: string): string {\n  return url.replace(/^\\//, '');\n}\n\nfunction removeTrailingSlashAndQueryString(url: string): string {\n  return url.replace(/\\/?\\?.*$/, '');\n}\n\nfunction ensureTrailingSlash(input: string, shouldAppend: boolean): string {\n  const hasSlash = input.endsWith('/');\n  if (hasSlash && !shouldAppend) {\n    return input.substring(0, input.length - 1);\n  } else if (!hasSlash && shouldAppend) {\n    return `${input}/`;\n  }\n  return input;\n}\n\nfunction ensureLeadingSlash(input: string, shouldAppend: boolean): string {\n  const hasSlash = input.startsWith('/');\n  if (hasSlash && !shouldAppend) {\n    return input.substring(1);\n  } else if (!hasSlash && shouldAppend) {\n    return `/${input}`;\n  }\n  return input;\n}\n\n// @needsAudit\n/**\n * Create a URL that works for the environment the app is currently running in.\n * The scheme in bare and standalone must be defined in the app.json under `expo.scheme`.\n *\n * # Examples\n * - Bare: empty string\n * - Standalone, Custom: `yourscheme:///path`\n * - Web (dev): `https://localhost:19006/path`\n * - Web (prod): `https://myapp.com/path`\n * - Expo Client (dev): `exp://128.0.0.1:19000/--/path`\n * - Expo Client (prod): `exp://exp.host/@yourname/your-app/--/path`\n *\n * @param path addition path components to append to the base URL.\n * @param queryParams An object with a set of query parameters. These will be merged with any\n * Expo-specific parameters that are needed (e.g. release channel) and then appended to the URL\n * as a query string.\n * @param scheme Optional URI protocol to use in the URL `<scheme>:///`, when `undefined` the scheme\n * will be chosen from the Expo config (`app.config.js` or `app.json`).\n * @return A URL string which points to your app with the given deep link information.\n * @deprecated An alias for [`createURL()`](#linkingcreateurlpath-namedparameters). This method is\n * deprecated and will be removed in a future SDK version.\n */\nexport function makeUrl(path: string = '', queryParams?: QueryParams, scheme?: string): string {\n  return createURL(path, { queryParams, scheme, isTripleSlashed: true });\n}\n\n// @needsAudit\n/**\n * Helper method for constructing a deep link into your app, given an optional path and set of query\n * parameters. Creates a URI scheme with two slashes by default.\n *\n * The scheme in bare and standalone must be defined in the Expo config (`app.config.js` or `app.json`)\n * under `expo.scheme`.\n *\n * # Examples\n * - Bare: `<scheme>://path` - uses provided scheme or scheme from Expo config `scheme`.\n * - Standalone, Custom: `yourscheme://path`\n * - Web (dev): `https://localhost:19006/path`\n * - Web (prod): `https://myapp.com/path`\n * - Expo Client (dev): `exp://128.0.0.1:19000/--/path`\n * - Expo Client (prod): `exp://exp.host/@yourname/your-app/--/path`\n *\n * @param path Addition path components to append to the base URL.\n * @param namedParameters Additional options object.\n * @return A URL string which points to your app with the given deep link information.\n */\nexport function createURL(\n  path: string,\n  { scheme, queryParams = {}, isTripleSlashed = false }: CreateURLOptions = {}\n): string {\n  if (Platform.OS === 'web') {\n    if (!Platform.isDOMAvailable) return '';\n\n    const origin = ensureTrailingSlash(window.location.origin, false);\n    let queryString = qs.stringify(queryParams);\n    if (queryString) {\n      queryString = `?${queryString}`;\n    }\n\n    let outputPath = path;\n    if (outputPath) outputPath = ensureLeadingSlash(path, true);\n\n    return encodeURI(`${origin}${outputPath}${queryString}`);\n  }\n\n  const resolvedScheme = resolveScheme({ scheme });\n\n  let hostUri = getHostUri() || '';\n\n  if (hasCustomScheme() && isExpoHosted()) {\n    hostUri = '';\n  }\n\n  if (path) {\n    if (isExpoHosted() && hostUri) {\n      path = `/--/${removeLeadingSlash(path)}`;\n    }\n    if (isTripleSlashed && !path.startsWith('/')) {\n      path = `/${path}`;\n    }\n  } else {\n    path = '';\n  }\n\n  // merge user-provided query params with any that were already in the hostUri\n  // e.g. release-channel\n  let queryString = '';\n  const queryStringMatchResult = hostUri.match(/(.*)\\?(.+)/);\n  if (queryStringMatchResult) {\n    hostUri = queryStringMatchResult[1];\n    queryString = queryStringMatchResult[2];\n    let paramsFromHostUri = {};\n    try {\n      const parsedParams = qs.parse(queryString);\n      if (typeof parsedParams === 'object') {\n        paramsFromHostUri = parsedParams;\n      }\n    } catch {}\n    queryParams = {\n      ...queryParams,\n      ...paramsFromHostUri,\n    };\n  }\n  queryString = qs.stringify(queryParams);\n  if (queryString) {\n    queryString = `?${queryString}`;\n  }\n\n  hostUri = ensureLeadingSlash(hostUri, !isTripleSlashed);\n\n  return encodeURI(\n    `${resolvedScheme}:${isTripleSlashed ? '/' : ''}/${hostUri}${path}${queryString}`\n  );\n}\n\n// @needsAudit\n/**\n * Helper method for parsing out deep link information from a URL.\n * @param url A URL that points to the currently running experience (e.g. an output of `Linking.createURL()`).\n * @return A `ParsedURL` object.\n */\nexport function parse(url: string): ParsedURL {\n  validateURL(url);\n\n  const parsed = URL(url, /* parseQueryString */ true);\n\n  for (const param in parsed.query) {\n    parsed.query[param] = decodeURIComponent(parsed.query[param]!);\n  }\n  const queryParams = parsed.query;\n\n  const hostUri = getHostUri() || '';\n  const hostUriStripped = removePort(removeTrailingSlashAndQueryString(hostUri));\n\n  let path = parsed.pathname || null;\n  let hostname = parsed.hostname || null;\n  let scheme = parsed.protocol || null;\n\n  if (scheme) {\n    // Remove colon at end\n    scheme = scheme.substring(0, scheme.length - 1);\n  }\n\n  if (path) {\n    path = removeLeadingSlash(path);\n\n    let expoPrefix: string | null = null;\n    if (hostUriStripped) {\n      const parts = hostUriStripped.split('/');\n      expoPrefix = parts.slice(1).concat(['--/']).join('/');\n    }\n\n    if (isExpoHosted() && !hasCustomScheme() && expoPrefix && path.startsWith(expoPrefix)) {\n      path = path.substring(expoPrefix.length);\n      hostname = null;\n    } else if (path.indexOf('+') > -1) {\n      path = path.substring(path.indexOf('+') + 1);\n    }\n  }\n\n  return {\n    hostname,\n    path,\n    queryParams,\n    scheme,\n  };\n}\n\n// @needsAudit\n/**\n * Add a handler to `Linking` changes by listening to the `url` event type and providing the handler.\n * It is recommended to use the [`useURL()`](#useurl) hook instead.\n * @param type The only valid type is `'url'`.\n * @param handler An [`URLListener`](#urllistener) function that takes an `event` object of the type\n * [`EventType`](#eventype).\n * @return An EmitterSubscription that has the remove method from EventSubscription\n * @see [React Native Docs Linking page](https://reactnative.dev/docs/linking#addeventlistener).\n */\nexport function addEventListener(type: 'url', handler: URLListener): EmitterSubscription {\n  return NativeLinking.addEventListener(type, handler);\n}\n\n/**\n * Remove a handler by passing the `url` event type and the handler.\n * @param type The only valid type is `'url'`.\n * @param handler An [`URLListener`](#urllistener) function that takes an `event` object of the type\n * [`EventType`](#eventype).\n * @see [React Native Docs Linking page](https://reactnative.dev/docs/linking#removeeventlistener).\n *\n * @deprecated Call `remove()` on the return value of `addEventListener()` instead.\n */\nexport function removeEventListener(type: 'url', handler: URLListener): void {\n  NativeLinking.removeEventListener(type, handler);\n}\n\n// @needsAudit\n/**\n * Helper method which wraps React Native's `Linking.getInitialURL()` in `Linking.parse()`.\n * Parses the deep link information out of the URL used to open the experience initially.\n * If no link opened the app, all the fields will be `null`.\n * > On the web it parses the current window URL.\n * @return A promise that resolves with `ParsedURL` object.\n */\nexport async function parseInitialURLAsync(): Promise<ParsedURL> {\n  const initialUrl = await NativeLinking.getInitialURL();\n  if (!initialUrl) {\n    return {\n      scheme: null,\n      hostname: null,\n      path: null,\n      queryParams: null,\n    };\n  }\n\n  return parse(initialUrl);\n}\n\n// @needsAudit\n/**\n * Launch an Android intent with extras.\n * > Use [IntentLauncher](./intent-launcher) instead, `sendIntent` is only included in\n * > `Linking` for API compatibility with React Native's Linking API.\n * @platform android\n */\nexport async function sendIntent(action: string, extras?: SendIntentExtras[]): Promise<void> {\n  if (Platform.OS === 'android') {\n    return await NativeLinking.sendIntent(action, extras);\n  }\n  throw new UnavailabilityError('Linking', 'sendIntent');\n}\n\n// @needsAudit\n/**\n * Open the operating system settings app and displays the appâ€™s custom settings, if it has any.\n */\nexport async function openSettings(): Promise<void> {\n  if (Platform.OS === 'web') {\n    throw new UnavailabilityError('Linking', 'openSettings');\n  }\n  if (NativeLinking.openSettings) {\n    return await NativeLinking.openSettings();\n  }\n  await openURL('app-settings:');\n}\n\n// @needsAudit\n/**\n * Get the URL that was used to launch the app if it was launched by a link.\n * @return The URL string that launched your app, or `null`.\n */\nexport async function getInitialURL(): Promise<string | null> {\n  return (await NativeLinking.getInitialURL()) ?? null;\n}\n\n// @needsAudit\n/**\n * Attempt to open the given URL with an installed app. See the [Linking guide](/guides/linking)\n * for more information.\n * @param url A URL for the operating system to open, eg: `tel:5555555`, `exp://`.\n * @return A `Promise` that is fulfilled with `true` if the link is opened operating system\n * automatically or the user confirms the prompt to open the link. The `Promise` rejects if there\n * are no applications registered for the URL or the user cancels the dialog.\n */\nexport async function openURL(url: string): Promise<true> {\n  validateURL(url);\n  return await NativeLinking.openURL(url);\n}\n\n// @needsAudit\n/**\n * Determine whether or not an installed app can handle a given URL.\n * On web this always returns `true` because there is no API for detecting what URLs can be opened.\n * @param url The URL that you want to test can be opened.\n * @return A `Promise` object that is fulfilled with `true` if the URL can be handled, otherwise it\n * `false` if not.\n *\n * The `Promise` will reject on Android if it was impossible to check if the URL can be opened, and\n * on iOS if you didn't [add the specific scheme in the `LSApplicationQueriesSchemes` key inside **Info.plist**](/guides/linking#linking-from-your-app).\n */\nexport async function canOpenURL(url: string): Promise<boolean> {\n  validateURL(url);\n  return await NativeLinking.canOpenURL(url);\n}\n\n// @needsAudit\n/**\n * Returns the initial URL followed by any subsequent changes to the URL.\n * @return Returns the initial URL or `null`.\n */\nexport function useURL(): string | null {\n  const [url, setLink] = useState<string | null>(null);\n\n  function onChange(event: { url: string }) {\n    setLink(event.url);\n  }\n\n  useEffect(() => {\n    getInitialURL().then((url) => setLink(url));\n    const subscription = addEventListener('url', onChange);\n    return () => subscription.remove();\n  }, []);\n\n  return url;\n}\n\nexport * from './Linking.types';\nexport * from './Schemes';\n"]},"metadata":{},"sourceType":"module"}