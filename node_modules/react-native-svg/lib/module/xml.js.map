{"version":3,"names":["tags","svg","Svg","circle","Circle","ellipse","Ellipse","g","G","text","Text","tspan","TSpan","textPath","TextPath","path","Path","polygon","Polygon","polyline","Polyline","line","Line","rect","Rect","use","Use","image","Image","symbol","Symbol","defs","Defs","linearGradient","LinearGradient","radialGradient","RadialGradient","stop","Stop","clipPath","ClipPath","pattern","Pattern","mask","Mask","marker","Marker","missingTag","SvgAst","ast","override","props","children","err","console","error","bind","SvgXml","onError","xml","useMemo","parse","fetchText","uri","response","fetch","ok","Error","status","SvgUri","onLoad","useState","setXml","useEffect","then","data","catch","SvgFromXml","prevProps","setState","e","state","Component","SvgFromUri","upperCase","_match","letter","toUpperCase","camelCase","phrase","replace","getStyle","string","style","declarations","split","filter","v","trim","length","i","declaration","property","value","astToReact","index","Tag","map","repeat","str","result","toSpaces","tabs","locate","source","lines","nLines","column","before","slice","beforeExec","exec","beforeLine","after","afterExec","afterLine","pad","snippet","validNameCharacters","whitespace","quotemarks","middleware","currentElement","metadata","root","stack","message","test","neutral","char","push","openingTag","start","comment","end","cdata","closingTag","tag","getName","element","parent","getAttributes","styles","selfClosing","indexOf","pop","name","allowSpaces","getAttributeValue","isNaN","getQuotedAttributeValue","getUnquotedAttributeValue","quotemark","escaped","jsx"],"sources":["xml.tsx"],"sourcesContent":["import React, {\n  Component,\n  ComponentType,\n  useEffect,\n  useMemo,\n  useState,\n} from 'react';\nimport Rect from './elements/Rect';\nimport Circle from './elements/Circle';\nimport Ellipse from './elements/Ellipse';\nimport Polygon from './elements/Polygon';\nimport Polyline from './elements/Polyline';\nimport Line from './elements/Line';\nimport Svg, { SvgProps } from './elements/Svg';\nimport Path from './elements/Path';\nimport G from './elements/G';\nimport Text from './elements/Text';\nimport TSpan from './elements/TSpan';\nimport TextPath from './elements/TextPath';\nimport Use from './elements/Use';\nimport Image from './elements/Image';\nimport Symbol from './elements/Symbol';\nimport Defs from './elements/Defs';\nimport LinearGradient from './elements/LinearGradient';\nimport RadialGradient from './elements/RadialGradient';\nimport Stop from './elements/Stop';\nimport ClipPath from './elements/ClipPath';\nimport Pattern from './elements/Pattern';\nimport Mask from './elements/Mask';\nimport Marker from './elements/Marker';\n\nexport const tags: { [tag: string]: ComponentType } = {\n  svg: Svg,\n  circle: Circle,\n  ellipse: Ellipse,\n  g: G,\n  text: Text,\n  tspan: TSpan,\n  textPath: TextPath,\n  path: Path,\n  polygon: Polygon,\n  polyline: Polyline,\n  line: Line,\n  rect: Rect,\n  use: Use,\n  image: Image,\n  symbol: Symbol,\n  defs: Defs,\n  linearGradient: LinearGradient,\n  radialGradient: RadialGradient,\n  stop: Stop,\n  clipPath: ClipPath,\n  pattern: Pattern,\n  mask: Mask,\n  marker: Marker,\n};\n\nfunction missingTag() {\n  return null;\n}\n\nexport interface AST {\n  tag: string;\n  style?: Styles;\n  styles?: string;\n  priority?: Map<string, boolean | undefined>;\n  parent: AST | null;\n  children: (AST | string)[] | (JSX.Element | string)[];\n  props: {\n    [prop: string]: Styles | string | undefined;\n  };\n  Tag: ComponentType<React.PropsWithChildren<{}>>;\n}\n\nexport interface XmlAST extends AST {\n  children: (XmlAST | string)[];\n  parent: XmlAST | null;\n}\n\nexport interface JsxAST extends AST {\n  children: (JSX.Element | string)[];\n}\n\nexport type AdditionalProps = {\n  onError?: (error: Error) => void;\n  override?: Object;\n  onLoad?: () => void;\n};\n\nexport type UriProps = SvgProps & { uri: string | null } & AdditionalProps;\nexport type UriState = { xml: string | null };\n\nexport type XmlProps = SvgProps & { xml: string | null } & AdditionalProps;\nexport type XmlState = { ast: JsxAST | null };\n\nexport type AstProps = SvgProps & { ast: JsxAST | null } & AdditionalProps;\n\nexport function SvgAst({ ast, override }: AstProps) {\n  if (!ast) {\n    return null;\n  }\n  const { props, children } = ast;\n  return (\n    <Svg {...props} {...override}>\n      {children}\n    </Svg>\n  );\n}\n\nexport const err = console.error.bind(console);\n\nexport function SvgXml(props: XmlProps) {\n  const { onError = err, xml, override } = props;\n  const ast = useMemo<JsxAST | null>(\n    () => (xml !== null ? parse(xml) : null),\n    [xml],\n  );\n\n  try {\n    return <SvgAst ast={ast} override={override || props} />;\n  } catch (error) {\n    onError(error);\n    return null;\n  }\n}\n\nexport async function fetchText(uri: string) {\n  const response = await fetch(uri);\n  if (response.ok) {\n    return await response.text();\n  }\n  throw new Error(`Fetching ${uri} failed with status ${response.status}`);\n}\n\nexport function SvgUri(props: UriProps) {\n  const { onError = err, uri, onLoad } = props;\n  const [xml, setXml] = useState<string | null>(null);\n  useEffect(() => {\n    uri\n      ? fetchText(uri)\n          .then((data) => {\n            setXml(data);\n            onLoad?.();\n          })\n          .catch(onError)\n      : setXml(null);\n  }, [onError, uri, onLoad]);\n  return <SvgXml xml={xml} override={props} />;\n}\n\n// Extending Component is required for Animated support.\n\nexport class SvgFromXml extends Component<XmlProps, XmlState> {\n  state = { ast: null };\n  componentDidMount() {\n    this.parse(this.props.xml);\n  }\n  componentDidUpdate(prevProps: { xml: string | null }) {\n    const { xml } = this.props;\n    if (xml !== prevProps.xml) {\n      this.parse(xml);\n    }\n  }\n  parse(xml: string | null) {\n    try {\n      this.setState({ ast: xml ? parse(xml) : null });\n    } catch (e) {\n      console.error(e);\n    }\n  }\n  render() {\n    const {\n      props,\n      state: { ast },\n    } = this;\n    return <SvgAst ast={ast} override={props.override || props} />;\n  }\n}\n\nexport class SvgFromUri extends Component<UriProps, UriState> {\n  state = { xml: null };\n  componentDidMount() {\n    this.fetch(this.props.uri);\n  }\n  componentDidUpdate(prevProps: { uri: string | null }) {\n    const { uri } = this.props;\n    if (uri !== prevProps.uri) {\n      this.fetch(uri);\n    }\n  }\n  async fetch(uri: string | null) {\n    try {\n      this.setState({ xml: uri ? await fetchText(uri) : null });\n    } catch (e) {\n      console.error(e);\n    }\n  }\n  render() {\n    const {\n      props,\n      state: { xml },\n    } = this;\n    return <SvgFromXml xml={xml} override={props} />;\n  }\n}\n\nconst upperCase = (_match: string, letter: string) => letter.toUpperCase();\n\nexport const camelCase = (phrase: string) =>\n  phrase.replace(/[:-]([a-z])/g, upperCase);\n\nexport type Styles = { [property: string]: string };\n\nexport function getStyle(string: string): Styles {\n  const style: Styles = {};\n  const declarations = string.split(';').filter((v) => v.trim());\n  const { length } = declarations;\n  for (let i = 0; i < length; i++) {\n    const declaration = declarations[i];\n    if (declaration.length !== 0) {\n      const split = declaration.split(':');\n      const property = split[0];\n      const value = split[1];\n      style[camelCase(property.trim())] = value.trim();\n    }\n  }\n  return style;\n}\n\nexport function astToReact(\n  value: AST | string,\n  index: number,\n): JSX.Element | string {\n  if (typeof value === 'object') {\n    const { Tag, props, children } = value;\n    return (\n      <Tag key={index} {...props}>\n        {(children as (AST | string)[]).map(astToReact)}\n      </Tag>\n    );\n  }\n  return value;\n}\n\n// slimmed down parser based on https://github.com/Rich-Harris/svg-parser\n\nfunction repeat(str: string, i: number) {\n  let result = '';\n  while (i--) {\n    result += str;\n  }\n  return result;\n}\n\nconst toSpaces = (tabs: string) => repeat('  ', tabs.length);\n\nfunction locate(source: string, i: number) {\n  const lines = source.split('\\n');\n  const nLines = lines.length;\n  let column = i;\n  let line = 0;\n  for (; line < nLines; line++) {\n    const { length } = lines[line];\n    if (column >= length) {\n      column -= length;\n    } else {\n      break;\n    }\n  }\n  const before = source.slice(0, i).replace(/^\\t+/, toSpaces);\n  const beforeExec = /(^|\\n).*$/.exec(before);\n  const beforeLine = (beforeExec && beforeExec[0]) || '';\n  const after = source.slice(i);\n  const afterExec = /.*(\\n|$)/.exec(after);\n  const afterLine = afterExec && afterExec[0];\n  const pad = repeat(' ', beforeLine.length);\n  const snippet = `${beforeLine}${afterLine}\\n${pad}^`;\n  return { line, column, snippet };\n}\n\nconst validNameCharacters = /[a-zA-Z0-9:_-]/;\nconst whitespace = /[\\s\\t\\r\\n]/;\nconst quotemarks = /['\"]/;\n\nexport type Middleware = (ast: XmlAST) => XmlAST;\n\nexport function parse(source: string, middleware?: Middleware): JsxAST | null {\n  const length = source.length;\n  let currentElement: XmlAST | null = null;\n  let state = metadata;\n  let children = null;\n  let root: XmlAST | undefined;\n  let stack: XmlAST[] = [];\n\n  function error(message: string) {\n    const { line, column, snippet } = locate(source, i);\n    throw new Error(\n      `${message} (${line}:${column}). If this is valid SVG, it's probably a bug. Please raise an issue\\n\\n${snippet}`,\n    );\n  }\n\n  function metadata() {\n    while (\n      i + 1 < length &&\n      (source[i] !== '<' || !validNameCharacters.test(source[i + 1]))\n    ) {\n      i++;\n    }\n\n    return neutral();\n  }\n\n  function neutral() {\n    let text = '';\n    let char;\n    while (i < length && (char = source[i]) !== '<') {\n      text += char;\n      i += 1;\n    }\n\n    if (/\\S/.test(text)) {\n      children.push(text);\n    }\n\n    if (source[i] === '<') {\n      return openingTag;\n    }\n\n    return neutral;\n  }\n\n  function openingTag() {\n    const char = source[i];\n\n    if (char === '?') {\n      return neutral;\n    } // <?xml...\n\n    if (char === '!') {\n      const start = i + 1;\n      if (source.slice(start, i + 3) === '--') {\n        return comment;\n      }\n      const end = i + 8;\n      if (source.slice(start, end) === '[CDATA[') {\n        return cdata;\n      }\n      if (/doctype/i.test(source.slice(start, end))) {\n        return neutral;\n      }\n    }\n\n    if (char === '/') {\n      return closingTag;\n    }\n\n    const tag = getName();\n    const props: { [prop: string]: Styles | string | undefined } = {};\n    const element: XmlAST = {\n      tag,\n      props,\n      children: [],\n      parent: currentElement,\n      Tag: tags[tag] || missingTag,\n    };\n\n    if (currentElement) {\n      children.push(element);\n    } else {\n      root = element;\n    }\n\n    getAttributes(props);\n\n    const { style } = props;\n    if (typeof style === 'string') {\n      element.styles = style;\n      props.style = getStyle(style);\n    }\n\n    let selfClosing = false;\n\n    if (source[i] === '/') {\n      i += 1;\n      selfClosing = true;\n    }\n\n    if (source[i] !== '>') {\n      error('Expected >');\n    }\n\n    if (!selfClosing) {\n      currentElement = element;\n      ({ children } = element);\n      stack.push(element);\n    }\n\n    return neutral;\n  }\n\n  function comment() {\n    const index = source.indexOf('-->', i);\n    if (!~index) {\n      error('expected -->');\n    }\n\n    i = index + 2;\n    return neutral;\n  }\n\n  function cdata() {\n    const index = source.indexOf(']]>', i);\n    if (!~index) {\n      error('expected ]]>');\n    }\n\n    children.push(source.slice(i + 7, index));\n\n    i = index + 2;\n    return neutral;\n  }\n\n  function closingTag() {\n    const tag = getName();\n\n    if (!tag) {\n      error('Expected tag name');\n    }\n\n    if (currentElement && tag !== currentElement.tag) {\n      error(\n        `Expected closing tag </${tag}> to match opening tag <${currentElement.tag}>`,\n      );\n    }\n\n    if (source[i] !== '>') {\n      error('Expected >');\n    }\n\n    stack.pop();\n    currentElement = stack[stack.length - 1];\n    if (currentElement) {\n      ({ children } = currentElement);\n    }\n\n    return neutral;\n  }\n\n  function getName() {\n    let name = '';\n    let char;\n    while (i < length && validNameCharacters.test((char = source[i]))) {\n      name += char;\n      i += 1;\n    }\n\n    return name;\n  }\n\n  function getAttributes(props: {\n    [x: string]: Styles | string | number | boolean | undefined;\n    style?: string | Styles | undefined;\n  }) {\n    while (i < length) {\n      if (!whitespace.test(source[i])) {\n        return;\n      }\n      allowSpaces();\n\n      const name = getName();\n      if (!name) {\n        return;\n      }\n\n      let value: boolean | number | string = true;\n\n      allowSpaces();\n      if (source[i] === '=') {\n        i += 1;\n        allowSpaces();\n\n        value = getAttributeValue();\n        if (!isNaN(+value) && value.trim() !== '') {\n          value = +value;\n        }\n      }\n\n      props[camelCase(name)] = value;\n    }\n  }\n\n  function getAttributeValue(): string {\n    return quotemarks.test(source[i])\n      ? getQuotedAttributeValue()\n      : getUnquotedAttributeValue();\n  }\n\n  function getUnquotedAttributeValue() {\n    let value = '';\n    do {\n      const char = source[i];\n      if (char === ' ' || char === '>' || char === '/') {\n        return value;\n      }\n\n      value += char;\n      i += 1;\n    } while (i < length);\n\n    return value;\n  }\n\n  function getQuotedAttributeValue() {\n    const quotemark = source[i++];\n\n    let value = '';\n    let escaped = false;\n\n    while (i < length) {\n      const char = source[i++];\n      if (char === quotemark && !escaped) {\n        return value;\n      }\n\n      if (char === '\\\\' && !escaped) {\n        escaped = true;\n      }\n\n      value += escaped ? `\\\\${char}` : char;\n      escaped = false;\n    }\n\n    return value;\n  }\n\n  function allowSpaces() {\n    while (i < length && whitespace.test(source[i])) {\n      i += 1;\n    }\n  }\n\n  let i = 0;\n  while (i < length) {\n    if (!state) {\n      error('Unexpected character');\n    }\n    state = state();\n    i += 1;\n  }\n\n  if (state !== neutral) {\n    error('Unexpected end of input');\n  }\n\n  if (root) {\n    const xml: XmlAST = (middleware ? middleware(root) : root) || root;\n    const ast: (JSX.Element | string)[] = xml.children.map(astToReact);\n    const jsx: JsxAST = xml as JsxAST;\n    jsx.children = ast;\n    return jsx;\n  }\n\n  return null;\n}\n"],"mappings":"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"}