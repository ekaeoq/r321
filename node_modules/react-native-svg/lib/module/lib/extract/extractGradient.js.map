{"version":3,"names":["percentReg","percentToFloat","percent","__getAnimatedValue","matched","match","console","warn","offsetComparator","object","other","extractGradient","props","parent","id","children","gradientTransform","transform","gradientUnits","stops","childArray","Children","map","child","React","cloneElement","l","length","i","style","offset","stopColor","stopOpacity","offsetNumber","color","processColor","isNaN","alpha","Math","round","extractOpacity","push","sort","gradient","k","j","s","name","units","extractTransform"],"sources":["extractGradient.ts"],"sourcesContent":["import React, { Children, ReactElement } from 'react';\nimport { processColor } from 'react-native';\n\nimport extractOpacity from './extractOpacity';\nimport extractTransform from './extractTransform';\nimport { TransformProps } from './types';\nimport units from '../units';\n\nconst percentReg = /^([+-]?\\d+(?:\\.\\d+)?(?:[eE][+-]?\\d+)?)(%?)$/;\n\nfunction percentToFloat(\n  percent:\n    | number\n    | string\n    | {\n        __getAnimatedValue: () => number;\n      },\n): number {\n  if (typeof percent === 'number') {\n    return percent;\n  }\n  if (\n    typeof percent === 'object' &&\n    typeof percent.__getAnimatedValue === 'function'\n  ) {\n    return percent.__getAnimatedValue();\n  }\n  const matched = typeof percent === 'string' && percent.match(percentReg);\n  if (!matched) {\n    console.warn(`\"${percent}\" is not a valid number or percentage string.`);\n    return 0;\n  }\n\n  return matched[2] ? +matched[1] / 100 : +matched[1];\n}\n\nconst offsetComparator = (object: number[], other: number[]) =>\n  object[0] - other[0];\n\nexport default function extractGradient(\n  props: {\n    id?: string;\n    children?: ReactElement[];\n    transform?: TransformProps['transform'];\n    gradientTransform?: TransformProps['transform'];\n    gradientUnits?: 'objectBoundingBox' | 'userSpaceOnUse';\n  } & TransformProps,\n  parent: {},\n) {\n  const { id, children, gradientTransform, transform, gradientUnits } = props;\n  if (!id) {\n    return null;\n  }\n\n  const stops = [];\n  const childArray = children\n    ? Children.map(children, (child) =>\n        React.cloneElement(child, {\n          parent,\n        }),\n      )\n    : [];\n  const l = childArray.length;\n  for (let i = 0; i < l; i++) {\n    const {\n      props: {\n        style,\n        offset = style && style.offset,\n        stopColor = (style && style.stopColor) || '#000',\n        stopOpacity = style && style.stopOpacity,\n      },\n    } = childArray[i];\n    const offsetNumber = percentToFloat(offset || 0);\n    const color = stopColor && processColor(stopColor);\n    if (typeof color !== 'number' || isNaN(offsetNumber)) {\n      console.warn(\n        `\"${stopColor}\" is not a valid color or \"${offset}\" is not a valid offset`,\n      );\n      continue;\n    }\n    const alpha = Math.round(extractOpacity(stopOpacity) * 255);\n    stops.push([offsetNumber, (color & 0x00ffffff) | (alpha << 24)]);\n  }\n  stops.sort(offsetComparator);\n\n  const gradient = [];\n  const k = stops.length;\n  for (let j = 0; j < k; j++) {\n    const s = stops[j];\n    gradient.push(s[0], s[1]);\n  }\n\n  return {\n    name: id,\n    gradient,\n    children: childArray,\n    gradientUnits: (gradientUnits && units[gradientUnits]) || 0,\n    gradientTransform: extractTransform(\n      gradientTransform || transform || props,\n    ),\n  };\n}\n"],"mappings":"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"}