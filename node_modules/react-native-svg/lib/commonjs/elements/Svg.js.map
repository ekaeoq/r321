{"version":3,"names":["styles","StyleSheet","create","svg","backgroundColor","borderWidth","defaultStyle","Svg","callback","root","measureInWindow","measure","relativeToNativeNode","onSuccess","onFail","measureLayout","props","width","height","bbWidth","String","bbHeight","setNativeProps","options","handle","findNodeHandle","RNSVGSvgViewModule","require","default","toDataURL","style","opacity","viewBox","children","onLayout","preserveAspectRatio","extracted","stylesAndProps","Array","isArray","Object","assign","color","focusable","transform","font","fill","fillOpacity","fillRule","stroke","strokeWidth","strokeOpacity","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","undefined","Boolean","rootStyles","push","override","overrideStyles","o","NaN","isNaN","w","parseInt","h","doNotParseWidth","length","doNotParseHeight","flex","extractResponder","tintColor","gStyle","RNSVGSvg","Platform","OS","RNSVGSvgAndroid","RNSVGSvgIOS","ref","refMethod","extractViewBox","Shape"],"sources":["Svg.tsx"],"sourcesContent":["import React, { Component } from 'react';\nimport {\n  ColorValue,\n  findNodeHandle,\n  MeasureInWindowOnSuccessCallback,\n  MeasureLayoutOnSuccessCallback,\n  MeasureOnSuccessCallback,\n  NativeMethods,\n  Platform,\n  StyleProp,\n  StyleSheet,\n  ViewProps,\n  ViewStyle,\n} from 'react-native';\nimport {\n  extractedProps,\n  NumberProp,\n  ResponderInstanceProps,\n} from '../lib/extract/types';\nimport extractResponder from '../lib/extract/extractResponder';\nimport extractViewBox from '../lib/extract/extractViewBox';\nimport Shape from './Shape';\nimport G, { GProps } from './G';\nimport { RNSVGSvgAndroid, RNSVGSvgIOS } from '../ReactNativeSVG';\nimport type { Spec } from '../fabric/NativeSvgViewModule';\n\nconst styles = StyleSheet.create({\n  svg: {\n    backgroundColor: 'transparent',\n    borderWidth: 0,\n  },\n});\nconst defaultStyle = styles.svg;\n\nexport interface SvgProps extends GProps, ViewProps {\n  width?: NumberProp;\n  height?: NumberProp;\n  viewBox?: string;\n  preserveAspectRatio?: string;\n  color?: ColorValue;\n  title?: string;\n}\n\nexport default class Svg extends Shape<SvgProps> {\n  static displayName = 'Svg';\n\n  static defaultProps = {\n    preserveAspectRatio: 'xMidYMid meet',\n  };\n\n  measureInWindow = (callback: MeasureInWindowOnSuccessCallback) => {\n    const { root } = this;\n    root && root.measureInWindow(callback);\n  };\n\n  measure = (callback: MeasureOnSuccessCallback) => {\n    const { root } = this;\n    root && root.measure(callback);\n  };\n\n  measureLayout = (\n    relativeToNativeNode: number,\n    onSuccess: MeasureLayoutOnSuccessCallback,\n    onFail: () => void /* currently unused */,\n  ) => {\n    const { root } = this;\n    root && root.measureLayout(relativeToNativeNode, onSuccess, onFail);\n  };\n\n  setNativeProps = (\n    props: Object & {\n      width?: NumberProp;\n      height?: NumberProp;\n      bbWidth?: NumberProp;\n      bbHeight?: NumberProp;\n    },\n  ) => {\n    const { width, height } = props;\n    if (width) {\n      props.bbWidth = String(width);\n    }\n    if (height) {\n      props.bbHeight = String(height);\n    }\n    const { root } = this;\n    root && root.setNativeProps(props);\n  };\n\n  toDataURL = (callback: (base64: string) => void, options?: Object) => {\n    if (!callback) {\n      return;\n    }\n    const handle = findNodeHandle(this.root as Component);\n    const RNSVGSvgViewModule: Spec =\n      require('../fabric/NativeSvgViewModule').default;\n    RNSVGSvgViewModule.toDataURL(handle, options, callback);\n  };\n\n  render() {\n    const {\n      style,\n      opacity,\n      viewBox,\n      children,\n      onLayout,\n      preserveAspectRatio,\n      ...extracted\n    } = this.props;\n    const stylesAndProps = {\n      ...(Array.isArray(style) ? Object.assign({}, ...style) : style),\n      ...extracted,\n    };\n    let {\n      color,\n      width,\n      height,\n      focusable,\n      transform,\n\n      // Inherited G properties\n      font,\n      fill,\n      fillOpacity,\n      fillRule,\n      stroke,\n      strokeWidth,\n      strokeOpacity,\n      strokeDasharray,\n      strokeDashoffset,\n      strokeLinecap,\n      strokeLinejoin,\n      strokeMiterlimit,\n    } = stylesAndProps;\n    if (width === undefined && height === undefined) {\n      width = height = '100%';\n    }\n\n    const props: extractedProps = extracted as extractedProps;\n    props.focusable = Boolean(focusable) && focusable !== 'false';\n    const rootStyles: StyleProp<ViewStyle>[] = [defaultStyle];\n\n    if (style) {\n      rootStyles.push(style);\n    }\n\n    let override = false;\n    const overrideStyles: ViewStyle = {};\n    const o = opacity != null ? +opacity : NaN;\n    if (!isNaN(o)) {\n      override = true;\n      overrideStyles.opacity = o;\n    }\n\n    if (width && height) {\n      override = true;\n      const w = parseInt(width, 10);\n      const h = parseInt(height, 10);\n      const doNotParseWidth = isNaN(w) || width[width.length - 1] === '%';\n      const doNotParseHeight = isNaN(h) || height[height.length - 1] === '%';\n      overrideStyles.width = doNotParseWidth ? width : w;\n      overrideStyles.height = doNotParseHeight ? height : h;\n      overrideStyles.flex = 0;\n    }\n\n    if (override) {\n      rootStyles.push(overrideStyles);\n    }\n\n    props.style = rootStyles.length > 1 ? rootStyles : defaultStyle;\n\n    if (width != null) {\n      props.bbWidth = String(width);\n    }\n    if (height != null) {\n      props.bbHeight = String(height);\n    }\n\n    extractResponder(props, props, this as ResponderInstanceProps);\n\n    props.tintColor = color;\n\n    if (onLayout != null) {\n      props.onLayout = onLayout;\n    }\n\n    const gStyle = Object.assign({}, style) as ViewStyle;\n    // if transform prop is of RN style's kind, we want `SvgView` to handle it\n    // since it can be done here. Otherwise, if transform is of `svg` kind, e.g. string,\n    // we want G element to parse it since `Svg` does not include parsing of those custom transforms.\n    // It is problematic due to fact that we either move the `Svg` or just its `G` child, and in the\n    // second case, when the `G` leaves the area of `Svg`, it will just disappear.\n    if (Array.isArray(transform) && typeof transform[0] === 'object') {\n      gStyle.transform = undefined;\n    } else {\n      props.transform = undefined;\n      gStyle.transform = transform;\n    }\n\n    const RNSVGSvg = Platform.OS === 'android' ? RNSVGSvgAndroid : RNSVGSvgIOS;\n\n    return (\n      <RNSVGSvg\n        {...props}\n        ref={(ref) => this.refMethod(ref as (Svg & NativeMethods) | null)}\n        {...extractViewBox({ viewBox, preserveAspectRatio })}\n      >\n        <G\n          {...{\n            children,\n            style: gStyle,\n            font,\n            fill,\n            fillOpacity,\n            fillRule,\n            stroke,\n            strokeWidth,\n            strokeOpacity,\n            strokeDasharray,\n            strokeDashoffset,\n            strokeLinecap,\n            strokeLinejoin,\n            strokeMiterlimit,\n          }}\n        />\n      </RNSVGSvg>\n    );\n  }\n}\n"],"mappings":"wnCAAA,oDACA,yCAkBA,yFACA,qFACA,uDACA,8CACA,iDAAiE,44BAGjE,GAAMA,OAAM,CAAGC,uBAAU,CAACC,MAAM,CAAC,CAC/BC,GAAG,CAAE,CACHC,eAAe,CAAE,aAAa,CAC9BC,WAAW,CAAE,CACf,CACF,CAAC,CAAC,CACF,GAAMC,aAAY,CAAGN,MAAM,CAACG,GAAG,CAAC,GAWXI,IAAG,wYAOJ,SAACC,QAA0C,CAAK,CAChE,qEAAQC,IAAI,uBAAJA,IAAI,CACZA,IAAI,EAAIA,IAAI,CAACC,eAAe,CAACF,QAAQ,CAAC,CACxC,CAAC,oFAES,SAACA,QAAkC,CAAK,CAChD,sEAAQC,IAAI,wBAAJA,IAAI,CACZA,IAAI,EAAIA,IAAI,CAACE,OAAO,CAACH,QAAQ,CAAC,CAChC,CAAC,0FAEe,SACdI,oBAA4B,CAC5BC,SAAyC,CACzCC,MAAkB,CACf,CACH,sEAAQL,IAAI,wBAAJA,IAAI,CACZA,IAAI,EAAIA,IAAI,CAACM,aAAa,CAACH,oBAAoB,CAAEC,SAAS,CAAEC,MAAM,CAAC,CACrE,CAAC,2FAEgB,SACfE,KAKC,CACE,CACH,GAAQC,MAAK,CAAaD,KAAK,CAAvBC,KAAK,CAAEC,MAAM,CAAKF,KAAK,CAAhBE,MAAM,CACrB,GAAID,KAAK,CAAE,CACTD,KAAK,CAACG,OAAO,CAAGC,MAAM,CAACH,KAAK,CAAC,CAC/B,CACA,GAAIC,MAAM,CAAE,CACVF,KAAK,CAACK,QAAQ,CAAGD,MAAM,CAACF,MAAM,CAAC,CACjC,CACA,sEAAQT,IAAI,wBAAJA,IAAI,CACZA,IAAI,EAAIA,IAAI,CAACa,cAAc,CAACN,KAAK,CAAC,CACpC,CAAC,sFAEW,SAACR,QAAkC,CAAEe,OAAgB,CAAK,CACpE,GAAI,CAACf,QAAQ,CAAE,CACb,OACF,CACA,GAAMgB,OAAM,CAAG,GAAAC,2BAAc,EAAC,MAAKhB,IAAI,CAAc,CACrD,GAAMiB,mBAAwB,CAC5BC,OAAO,CAAC,+BAA+B,CAAC,CAACC,OAAO,CAClDF,kBAAkB,CAACG,SAAS,CAACL,MAAM,CAAED,OAAO,CAAEf,QAAQ,CAAC,CACzD,CAAC,mEAED,iBAAS,iBACP,gBAQI,IAAI,CAACQ,KAAK,CAPZc,KAAK,aAALA,KAAK,CACLC,OAAO,aAAPA,OAAO,CACPC,OAAO,aAAPA,OAAO,CACPC,QAAQ,aAARA,QAAQ,CACRC,QAAQ,aAARA,QAAQ,CACRC,mBAAmB,aAAnBA,mBAAmB,CAChBC,SAAS,8DAEd,GAAMC,eAAc,kBACdC,KAAK,CAACC,OAAO,CAACT,KAAK,CAAC,CAAGU,MAAM,CAACC,MAAM,OAAbD,MAAM,EAAQ,CAAC,CAAC,yCAAKV,KAAK,GAAC,CAAGA,KAAK,CAC3DM,SAAS,CACb,CACD,GACEM,MAAK,CAmBHL,cAAc,CAnBhBK,KAAK,CACLzB,KAAK,CAkBHoB,cAAc,CAlBhBpB,KAAK,CACLC,MAAM,CAiBJmB,cAAc,CAjBhBnB,MAAM,CACNyB,SAAS,CAgBPN,cAAc,CAhBhBM,SAAS,CACTC,SAAS,CAePP,cAAc,CAfhBO,SAAS,CAGTC,IAAI,CAYFR,cAAc,CAZhBQ,IAAI,CACJC,IAAI,CAWFT,cAAc,CAXhBS,IAAI,CACJC,WAAW,CAUTV,cAAc,CAVhBU,WAAW,CACXC,QAAQ,CASNX,cAAc,CAThBW,QAAQ,CACRC,MAAM,CAQJZ,cAAc,CARhBY,MAAM,CACNC,WAAW,CAOTb,cAAc,CAPhBa,WAAW,CACXC,aAAa,CAMXd,cAAc,CANhBc,aAAa,CACbC,eAAe,CAKbf,cAAc,CALhBe,eAAe,CACfC,gBAAgB,CAIdhB,cAAc,CAJhBgB,gBAAgB,CAChBC,aAAa,CAGXjB,cAAc,CAHhBiB,aAAa,CACbC,cAAc,CAEZlB,cAAc,CAFhBkB,cAAc,CACdC,gBAAgB,CACdnB,cAAc,CADhBmB,gBAAgB,CAElB,GAAIvC,KAAK,GAAKwC,SAAS,EAAIvC,MAAM,GAAKuC,SAAS,CAAE,CAC/CxC,KAAK,CAAGC,MAAM,CAAG,MAAM,CACzB,CAEA,GAAMF,MAAqB,CAAGoB,SAA2B,CACzDpB,KAAK,CAAC2B,SAAS,CAAGe,OAAO,CAACf,SAAS,CAAC,EAAIA,SAAS,GAAK,OAAO,CAC7D,GAAMgB,WAAkC,CAAG,CAACrD,YAAY,CAAC,CAEzD,GAAIwB,KAAK,CAAE,CACT6B,UAAU,CAACC,IAAI,CAAC9B,KAAK,CAAC,CACxB,CAEA,GAAI+B,SAAQ,CAAG,KAAK,CACpB,GAAMC,eAAyB,CAAG,CAAC,CAAC,CACpC,GAAMC,EAAC,CAAGhC,OAAO,EAAI,IAAI,CAAG,CAACA,OAAO,CAAGiC,GAAG,CAC1C,GAAI,CAACC,KAAK,CAACF,CAAC,CAAC,CAAE,CACbF,QAAQ,CAAG,IAAI,CACfC,cAAc,CAAC/B,OAAO,CAAGgC,CAAC,CAC5B,CAEA,GAAI9C,KAAK,EAAIC,MAAM,CAAE,CACnB2C,QAAQ,CAAG,IAAI,CACf,GAAMK,EAAC,CAAGC,QAAQ,CAAClD,KAAK,CAAE,EAAE,CAAC,CAC7B,GAAMmD,EAAC,CAAGD,QAAQ,CAACjD,MAAM,CAAE,EAAE,CAAC,CAC9B,GAAMmD,gBAAe,CAAGJ,KAAK,CAACC,CAAC,CAAC,EAAIjD,KAAK,CAACA,KAAK,CAACqD,MAAM,CAAG,CAAC,CAAC,GAAK,GAAG,CACnE,GAAMC,iBAAgB,CAAGN,KAAK,CAACG,CAAC,CAAC,EAAIlD,MAAM,CAACA,MAAM,CAACoD,MAAM,CAAG,CAAC,CAAC,GAAK,GAAG,CACtER,cAAc,CAAC7C,KAAK,CAAGoD,eAAe,CAAGpD,KAAK,CAAGiD,CAAC,CAClDJ,cAAc,CAAC5C,MAAM,CAAGqD,gBAAgB,CAAGrD,MAAM,CAAGkD,CAAC,CACrDN,cAAc,CAACU,IAAI,CAAG,CAAC,CACzB,CAEA,GAAIX,QAAQ,CAAE,CACZF,UAAU,CAACC,IAAI,CAACE,cAAc,CAAC,CACjC,CAEA9C,KAAK,CAACc,KAAK,CAAG6B,UAAU,CAACW,MAAM,CAAG,CAAC,CAAGX,UAAU,CAAGrD,YAAY,CAE/D,GAAIW,KAAK,EAAI,IAAI,CAAE,CACjBD,KAAK,CAACG,OAAO,CAAGC,MAAM,CAACH,KAAK,CAAC,CAC/B,CACA,GAAIC,MAAM,EAAI,IAAI,CAAE,CAClBF,KAAK,CAACK,QAAQ,CAAGD,MAAM,CAACF,MAAM,CAAC,CACjC,CAEA,GAAAuD,yBAAgB,EAACzD,KAAK,CAAEA,KAAK,CAAE,IAAI,CAA2B,CAE9DA,KAAK,CAAC0D,SAAS,CAAGhC,KAAK,CAEvB,GAAIR,QAAQ,EAAI,IAAI,CAAE,CACpBlB,KAAK,CAACkB,QAAQ,CAAGA,QAAQ,CAC3B,CAEA,GAAMyC,OAAM,CAAGnC,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,CAAEX,KAAK,CAAc,CAMpD,GAAIQ,KAAK,CAACC,OAAO,CAACK,SAAS,CAAC,EAAI,MAAOA,UAAS,CAAC,CAAC,CAAC,GAAK,QAAQ,CAAE,CAChE+B,MAAM,CAAC/B,SAAS,CAAGa,SAAS,CAC9B,CAAC,IAAM,CACLzC,KAAK,CAAC4B,SAAS,CAAGa,SAAS,CAC3BkB,MAAM,CAAC/B,SAAS,CAAGA,SAAS,CAC9B,CAEA,GAAMgC,SAAQ,CAAGC,qBAAQ,CAACC,EAAE,GAAK,SAAS,CAAGC,+BAAe,CAAGC,2BAAW,CAE1E,MACE,8BAAC,QAAQ,0BACHhE,KAAK,EACT,GAAG,CAAE,aAACiE,IAAG,QAAK,OAAI,CAACC,SAAS,CAACD,IAAG,CAAiC,EAAC,EAC9D,GAAAE,uBAAc,EAAC,CAAEnD,OAAO,CAAPA,OAAO,CAAEG,mBAAmB,CAAnBA,mBAAoB,CAAC,CAAC,+EAEpD,6BAAC,UAAC,EAEEF,QAAQ,CAARA,QAAQ,CACRH,KAAK,CAAE6C,MAAM,CACb9B,IAAI,CAAJA,IAAI,CACJC,IAAI,CAAJA,IAAI,CACJC,WAAW,CAAXA,WAAW,CACXC,QAAQ,CAARA,QAAQ,CACRC,MAAM,CAANA,MAAM,CACNC,WAAW,CAAXA,WAAW,CACXC,aAAa,CAAbA,aAAa,CACbC,eAAe,CAAfA,eAAe,CACfC,gBAAgB,CAAhBA,gBAAgB,CAChBC,aAAa,CAAbA,aAAa,CACbC,cAAc,CAAdA,cAAc,CACdC,gBAAgB,CAAhBA,gBAAgB,6EAElB,CACO,CAEf,CAAC,iBAvL8B4B,eAAK,mDAAjB7E,GAAG,eACD,KAAK,+BADPA,GAAG,gBAGA,CACpB4B,mBAAmB,CAAE,eACvB,CAAC"}